# 📝 灵枢笔记更新日志

## [2.0.0] - 2025-07-17

### ✨ 新增功能
- **统一设置服务集成**: 集成统一账号系统，支持多应用单点登录
- **文件系统自动保存**: 富文本笔记自动保存为HTML文件到本地文件系统
- **用户数据隔离**: 每个用户独立的文件存储空间，基于用户名分文件夹
- **文档预览优化**: 非阻塞式文档预览，支持同步滚动和拖拽调整
- **多LLM支持**: 支持OpenAI、Claude、本地模型等多种AI服务
- **向量化服务**: 集成向量化和重排序服务，提升搜索体验

### 🔧 技术改进
- **Prisma ORM**: 升级到Prisma数据库ORM，提供类型安全的数据库操作
- **NestJS架构**: 采用模块化架构，提升代码可维护性
- **TypeScript全栈**: 前后端全面使用TypeScript，提升开发体验
- **文件命名优化**: 富文本笔记文件名使用标题_ID格式，便于识别

### 🐛 问题修复
- 修复文档上传时的文件类型检测问题
- 修复富文本编辑器的样式冲突问题
- 修复用户认证状态同步问题
- 修复文件存储路径的跨平台兼容性

### 📁 文件结构变更
```
uploads/
└── {username}/
    └── {notebook_name}/
        ├── documents/          # 上传的文档文件
        └── rich-notes/         # 富文本笔记HTML文件
```

### 🔐 安全增强
- JWT令牌认证机制
- 用户数据隔离和权限控制
- 文件上传安全检查
- CORS跨域安全配置

### 📊 性能优化
- 文档解析性能提升
- 前端组件懒加载
- 数据库查询优化
- 文件上传进度显示

---

## [1.0.0] - 2024-12-01

### ✨ 初始功能
- 多编辑器支持 (Tiptap, CKEditor, Markdown, NotePad)
- AI文档解析和智能对话
- 文档上传和预览
- 基础用户认证系统
- 响应式界面设计

### 🏗️ 技术栈
- 前端: Next.js 14, TypeScript, Tailwind CSS
- 后端: NestJS, SQLite, JWT
- AI集成: OpenAI GPT, 文档解析引擎