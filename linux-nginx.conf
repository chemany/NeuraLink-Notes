# 定义 Nginx 运行的用户和组
user www-data;

# 定义工作进程数，通常设置为CPU核心数。'auto' 会自动检测。
worker_processes auto;

# 定义错误日志文件路径和级别
error_log /var/log/nginx/error.log warn;

# 定义主进程 PID 文件路径
pid /var/run/nginx.pid;

# 加载模块（如果需要）
#load_module modules/ngx_http_perl_module.so;

events {
    # 每个工作进程的最大连接数。
    worker_connections  1024;
}

http {
    # 引入MIME类型定义文件。
    include       /etc/nginx/mime.types;
    # 定义默认文件类型。
    default_type  application/octet-stream;

    # 定义日志格式
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    # 定义访问日志文件路径和格式
    access_log  /var/log/nginx/access.log  main;

    # 开启高效文件传输模式。
    sendfile        on;
    # 在一个数据包中发送所有头文件。
    tcp_nopush      on;
    # 不缓存数据，使数据尽快发送。
    tcp_nodelay     on;
    
    # 保持长连接超时时间。
    keepalive_timeout  65;

    # 启用 Gzip 压缩
    #gzip  on;

    # 包含所有已启用站点的配置文件
    include /etc/nginx/sites-enabled/*;
}
